# 交付用户需要的软件

设计是软件开发的基础，没有它很难做好开发，但你也不能被它牵制。

为了降低集成新代码带来的破坏性变化，提早集成，频繁集成；为了使用演示获得频繁反馈，你需要提早实现自动化部署。使用短迭代，增量发布来帮助经常发布新功能，与用户的需求变化联系更紧密。

最后，特别是客户要求预先签订固定价格合约时，很难通过敏捷的方法让客户与我们同坐一条船上。而且，事实上是固定的价格就意味着背叛承诺。


## 习惯建议：
### 让客户做决定
> 拒绝诱惑
- 诱惑魔鬼：“开发者兼具创新和智慧，最了解应用程序。因此，所有关键决定都应该由开发者定夺。每次业务人员介入的时候，都会弄得一团糟，他们无法理解我们做事的逻辑。”
    - 你只有一个选择：要么现在就让用户做决定，要么现在就开始开发，迟些让用户决定，不过要付出较高的成本。如果你在开发阶段回避这些问题，就增加了风险，但是你要能越早解决这些问题，就越有可能避免繁重的重新设计和编码。甚至在接近项目最终期限的时候，也能避免与日俱增的时间压力。
- 守护天使：“让你的客户做决定。开发者、经理或者业务分析师不应该做业务方面的决定。用业务负责人能够理解的语言，向他们详细解释遇到的问题，并让他们做决定。”
    - 当你和客户讨论问题的时候，准备好几种可选择的方案。不是从技术的角度，而是从业务的角度，介绍每种方案的优缺点，以及潜在的成本和利益。和他们讨论每个选择对时间和预算的影响，以及如何权衡。无论他们做出了什么决定，他们必须接受它，所以最好让他们了解一切之后再做这些决定。如果事后他们又想要其他的东西，可以公正地就成本和时间重新谈判。

> 切身感受：业务应用需要开发者和业务负责人互相配合来开发。这种配合的感觉就应该像一种良好的、诚实的工作关系。

> 平衡艺术：
- 记录客户做出的决定，并注明原因。但是也要注意，你选择的记录方法不能太笨重或者太繁琐。
- 如果业务负责人回答“我不知道”，这也是一个称心如意的答案。也许是他们还没有想到那么远，也许是他们只有看到运行的实物才能评估出结果。尽你所能为他们提供建议，实现代码的时候也要考虑可能出现的变化。


### 让设计指导而不是操纵开发
> 拒绝诱惑
- 诱惑魔鬼：“设计文档应该尽可能详细，这样，低级的代码工人只要敲入代码就可以了。在高层方面，详细描述对象的关联关系；在低层方面，详细描述对象之间的交互。其中一定要包括方法的实现信息和参数的注释。也不要忘记给出类里面的所有字段。编写代码的时候，无论你发现了什么，绝不能偏离了设计文档。”
    - 项目管理者和企业主常常为开发细节困扰，他们希望在开始编码之前，先有完整的设计和文档。
    - 设计满足实现即可，不必过于详细。严格的需求—设计—代码—测试开发流程源于理想化的瀑布式开发方法，它导致在前面进行了过度的设计。这样在项目的生命周期中，更新和维护这些详细的设计文档变成了主要工作，需要时间和资源方面的巨大投资，却只有很少的回报。
    - 设计可以分为两层：战略（CRC：类—职责—协作卡片的设计方法)和战术。如果你自己都不清楚所谈论的东西，就根本不可能精确地描述它。——约翰·冯·诺依曼
- 守护天使：“好设计是一张地图，它也会进化。设计指引你向正确的方向前进，你不要被设计（或者设计师）操纵。”
    - 画关键工作图（例如，用UML）是必不可少的，因为要使用类及其交互关系来描绘系统是如何组织的。在做设计的时候，你需要花时间去思考（讨论）各种不同选择的缺陷和益处，以及如何做权衡。
    - 然后，下一步才考虑是否需要开始编码。如果你在前期没有考虑清楚这些问题，就草草地开始编码，很可能会被很多意料之外的问题搞晕。
    - 时刻谨记，此阶段提出的设计只是基于你目前对需求的理解而已。一旦开始了编码，一切都会改变。设计及其代码实现会不停地发展和变化。

> 切身感受：好的设计应该是正确的，而不是精确的。也就是说，它描述的一切必须是正确的，不应该涉及不确定或者可能会发生变化的细节。它是目标，不是具体的处方。

> 平衡艺术：
- 白板、草图、便利贴都是非常好的设计工具。复杂的建模工具只会让你分散精力，而不是启发你的工作。
- 在没有经过真正的代码验证之前，不要陷入太多的设计任务。当对设计一无所知的时候，投入编码也是一件危险的事。 


### 合理地使用技术
> 拒绝诱惑
- 诱惑魔鬼：“你开始了一个新的项目，在你面前有一长串关于新技术和应用框架的列表。这些都是好东西，你真的需要使用列表中所有的技术。想一想，你的简历上将留下漂亮的一笔，用那些伟大的框架，你的新应用将具有极高技术含量。” 
    - 不要开发你能下载到的东西。
    - 你的代码写得越少，需要维护的东西就越少。
- 守护天使：“根据需要选择技术。首先决定什么是你需要的，接着为这些具体的问题评估使用技术。对任何要使用的技术，多问一些挑剔的问题，并真实地作出回答。”
    - 在考虑引入新技术或框架之前，先要把你需要解决的问题找出来。你的表述方式不同，会让结果有很大差异。
    - 找到了需要解决的问题，接下来就要考虑：
        1. 这个技术框架真能解决这个问题吗？或者，更尖锐一点说，你是如何评估这个技术的？要确保它能解决你的问题，并没有任何的毒副作用。如果需要，先做一个小的原型。
        2. 你将会被它拴住吗？一些技术是贼船，一旦你使用了它，就会被它套牢，再也不可能回头了。它缺乏可取消性（查阅[HT00]），当条件发生变化时，这可能对项目有致命打击。
        3. 维护成本是多少？会不会随着时间的推移，它的维护成本会非常昂贵？毕竟，方案的花费不应该高于要解决的问题，否则就是一次失败的投资。

> 切身感受：新技术就应该像是新的工具，可以帮助你更好地工作，它自己不应该成为你的工作。

> 平衡艺术：
- 白板、草图、便利贴都是非常好的设计工具。复杂的建模工具只会让你分散精力，而不是启发你的工作。
- 在没有经过真正的代码验证之前，不要陷入太多的设计任务。当对设计一无所知的时候，投入编码也是一件危险的事。 

